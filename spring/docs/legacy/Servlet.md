# Servlet

- 자바 EE에서 제공하는데, 자바로 웹 애플리케이션을 개발 할 수 있는 스팩과 API를 제공한다
- 한 요청을 처리할때마다 새로운 프로세스를 만들고 요청이 끝나면 프로세스를 종료하는 식이 아니라, **한 프로세스 내에 자원을 공유하는 쓰레드를 만들어서 요청을 처리한다**
  - 서블릿 등장 이전에는 CGI(Common Gateway Interface)를 사용했는데, CGI에서는 요청당 프로세스를 생성하는 방식으로 요청을 처리하였다
  - 서블릿은 CGI에 비해 다음과 같은 장점이 생긴다
    - 프로세스에 비해 요청 처리속도가 빠르다
      - 쓰레드로 처리하기 때문이다 → 쓰레드는 한 프로세스 안의 자원을 공유한다
        - 프로세스를 생성하는 비용 > 쓰레드를 생성하는 비용
    - 플랫폼 독립성, 이식성
      - 자바기반의 스팩과 API를 제공하기 때문에 OS의 종속성에 벗어나게 된다
    - 보안
      - 자바에서 제공하는 보안과 컨테이너(톰캣, 제티 등)에서 제공하는 보안을 지원 받을 수 있다

<br>

# Servlet 엔진 또는 Servlet 컨테이너

- 서블릿 스팩을 준수하고 스팩을 구현하는 구현체
  - ex> 톰캣, 제티, 언더토우 등..
- 서블릿 컨테이너들은 서블릿을 어떻게 구현하고, 초기화하고, 사용해야 하는지와 서블릿의 라이프사이클을 어떻게 관리해야하는지를 알고있다(스팩에 기반해서!)
  - 세션관리, 네트워크 서비스, MIME 기반 메시지 인코딩 및 디코딩, 서블릿 생명주기 관리....
- 서블릿 애플리케이션을 개발할때 개발자가 직접 실행 할 수 없다
  - 서블릿 애플리케이션을 실행해주는 것은 서블릿 컨테이너가 해준다(톰캣이나 그런것들..)

<br>

# Servlet 생명주기

- init()
  - 최초 요청을 받았을때 한번 초기화 하고 나면 그 다음 요청은 초기화 하지 않는다
- service()
  - init()이 실행되고 나서 요청을 처리한다
  - 각 요청을 별도의 쓰레드로 처리하게 되고 **요청이 올때마다 쓰레드를 생성한다**
  - 요청이 올때 서블릿 인스턴스의 service()를 호출한다
    - 요청의 HttpMethod에 따라 처리를 위임하게 된다
      ![Untitled](https://user-images.githubusercontent.com/23889744/150629312-d0f7427d-9227-4654-b070-ec205b6372e6.png)
      _<HttpServlet 클래스의 Method>_
    - 구현된 do* 메소드가 있다면 구현된 메소드를 사용하게 될것이고 없다면 HttpServlet 클래스의 기본 do* 메소드들을 실행하게 된다
- destroy()
  - 서블릿 컨테이너의 재량에 따라 서블릿을 더 이상 메모리에 올려놓을 필요가 없다면 메모리에서 해제한다
    - ex> 서블릿 컨테이너 종료 시 등
